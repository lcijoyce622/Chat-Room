(function(e){function t(t){for(var o,c,r=t[0],i=t[1],u=t[2],f=0,p=[];f<r.length;f++)c=r[f],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&p.push(a[c][0]),a[c]=0;for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o]);l&&l(t);while(p.length)p.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],o=!0,r=1;r<n.length;r++){var i=n[r];0!==a[i]&&(o=!1)}o&&(s.splice(t--,1),e=c(c.s=n[0]))}return e}var o={},a={app:0},s=[];function c(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=o,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)c.d(n,o,function(t){return e[t]}.bind(null,o));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/Chat-Room/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],i=r.push.bind(r);r.push=t,r=r.slice();for(var u=0;u<r.length;u++)t(r[u]);var l=i;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},1483:function(e,t,n){"use strict";n("ea98")},2699:function(e,t,n){"use strict";n("9fb9")},3089:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("7a23");function a(e,t){var n=Object(o["v"])("router-view");return Object(o["q"])(),Object(o["d"])(n)}n("5d92");const s={};s.render=a;var c=s,r=n("59e3"),i=n("2591"),u=n("6c02"),l={class:"container col-8"},f={class:"messaging"},p={class:"inbox_msg"},h=Object(o["f"])("div",{class:"title_bar"},[Object(o["f"])("h3",null,"Vue3 & Firebase Chat Room")],-1),b={class:"msg_history"},g={class:"name"},d={class:"received_withd_msg"},m=["src"],v={class:"time_date"},O={class:"type_msg"},j={class:"input_msg_write"};function y(e,t,n,a,s,c){var r=Object(o["v"])("BootstrapIcon");return Object(o["q"])(),Object(o["e"])("div",l,[Object(o["f"])("div",f,[Object(o["f"])("div",p,[h,Object(o["f"])("div",b,[(Object(o["q"])(!0),Object(o["e"])(o["a"],null,Object(o["u"])(s.messages,(function(e){return Object(o["q"])(),Object(o["e"])("div",{key:e.key},[Object(o["f"])("div",{class:Object(o["m"])([e.author==s.authUser.displayName?"sent_msg":"received_msg"])},[Object(o["f"])("span",g,Object(o["x"])(e.author),1),Object(o["f"])("div",d,[Object(o["f"])("img",{class:"incoming_msg_img",src:e.photo,alt:"sunil"},null,8,m),Object(o["f"])("p",null,Object(o["x"])(e.message),1),Object(o["f"])("span",v,Object(o["x"])(new Date(e.time).toLocaleDateString())+" "+Object(o["x"])(new Date(e.time).toLocaleTimeString()),1)])],2)])})),128))]),Object(o["f"])("div",O,[Object(o["f"])("div",j,[Object(o["B"])(Object(o["f"])("input",{"onUpdate:modelValue":t[0]||(t[0]=function(e){return s.message=e}),onKeyup:t[1]||(t[1]=Object(o["C"])((function(){return c.saveMessage&&c.saveMessage.apply(c,arguments)}),["enter"])),type:"text",class:"write_msg",placeholder:"Type a message"},null,544),[[o["z"],s.message]]),Object(o["f"])("button",{onClick:t[2]||(t[2]=function(){return c.saveMessage&&c.saveMessage.apply(c,arguments)}),class:"msg_send_btn",type:"button"},[Object(o["g"])(r,{icon:"cursor"})])])])])])])}n("159b");var _={data:function(){return{message:null,messages:[],authUser:{}}},methods:{scrollToBottom:function(){var e=document.querySelector(".msg_history");e.scrollTop=e.scrollHeight},saveMessage:function(){var e=this;if(null!=this.message&&""!=this.message){var t=i["a"].database().ref("chat").push().key;i["a"].database().ref("chat").child(t).set({message:this.message,author:this.authUser.displayName,photo:this.authUser.photoURL,time:Date.now(),key:t}).then((function(){console.log(e.authUser,e.messages),e.scrollToBottom()})),this.message=null}},fetchMessage:function(){var e=this;i["a"].database().ref().child("chat").on("value",(function(t){var n=[];t.forEach((function(e){n.push(e.val())})),e.messages=n,setTimeout((function(){e.scrollToBottom()}),500)}))}},created:function(){var e=this;i["a"].auth().onAuthStateChanged((function(t){e.authUser=t||{}})),this.fetchMessage()},beforeRouteEnter:function(e,t,n){i["a"].auth().onAuthStateChanged((function(e){e?n():n("/login")}))}};n("1483");_.render=y;var w=_,T={class:"container login"},S=Object(o["f"])("h1",null,"Please Login with your google account to continue.",-1);function k(e,t,n,a,s,c){return Object(o["q"])(),Object(o["e"])("div",T,[S,Object(o["f"])("button",{class:"btn",onClick:t[0]||(t[0]=function(){return c.login&&c.login.apply(c,arguments)})},"Login with google")])}var x={methods:{login:function(){var e=this,t=new i["a"].auth.GoogleAuthProvider;i["a"].auth().signInWithPopup(t).then((function(t){var n=t.credential.accessToken,o=t.user;console.log(n),console.log(o),e.$router.push("/")})).catch((function(e){console.log(e,"錯誤")}))}}};n("2699");x.render=k;var M=x,C=[{path:"/",name:"chatroom",component:w},{path:"/login",name:"login",component:M}],P=Object(u["a"])({history:Object(u["b"])("/Chat-Room/"),routes:C}),U=P;n("e71f");var B={apiKey:"AIzaSyDNCBU3TCldT2R3Qk22CRsKgKy-6HdSqw0",authDomain:"vue-chatroom-8284f.firebaseapp.com",projectId:"vue-chatroom-8284f",storageBucket:"vue-chatroom-8284f.appspot.com",messagingSenderId:"90281558685",appId:"1:90281558685:web:501da9a49fcc7013ebca74",measurementId:"G-TVMZ5YNHKT"};i["a"].initializeApp(B),i["a"].analytics();var I=Object(o["c"])(c);I.use(U),I.component("BootstrapIcon",r["a"]),I.mount("#app")},"5d92":function(e,t,n){"use strict";n("3089")},"9fb9":function(e,t,n){},ea98:function(e,t,n){}});
//# sourceMappingURL=app.914e9ce7.js.map